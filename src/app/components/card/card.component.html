<div class="card" [draggable]="'true'" (dragstart)="identifyCardBeingDragged($event)"
     id="list-{{listIndex}}-card-{{cardIndex}}" attr.listIndex="{{listIndex}}" attr.cardIndex="{{cardIndex}}"
     (dragover)="allowCardDragToBeDropped($event)">
  <div
    [ngClass]="{'ap-task-blue ': card.color =='blue', 'ap-task-white': card.color =='white', 'ap-task-greenYellow': card.color =='greenYellow', 'ap-task-aqua': card.color =='aqua'}"
    class="card-body">
    <h1 class="card-title mb-2" [(appContentEdit)]="card.header" [draggable]="'false'"></h1>
    <p class="text-muted card-subtitle mb-2" [(appContentEdit)]="card.summary" [draggable]="'false'"></p>
    <p class="text-muted card-subtitle mb-2" [draggable]="'false'">Created By:{{card.createdBy}}</p>
    <p class="text-muted card-subtitle mb-2" [draggable]="'false'">Assigned To:{{card.assignedTo}}</p>
    <button class="btn btn-sm btn-primary mr-2 mb-2" (click)="selectColor()">select color</button>
    <button (click)="assignTicket()" class="btn btn-sm btn-info mr-2 mb-2">Assign to..</button>
    <button class="btn btn-sm btn-warning mr-2 mb-2" (click)="addComment()">Add comment</button>
    <button *ngIf="!card.isCompleted; else completedBlock" (click)="markCompleted()" class="ap-complete btn btn-sm btn-success mb-2" [draggable]="'false'">Mark completed</button>
    <ng-template #completedBlock> <button class="btn btn-sm btn-info mb-2">Task completed!</button></ng-template>
    <ng-container *ngIf="card.comments">
        Comments:
    </ng-container>
    <ng-container *ngFor="let comment of card.comments; let i = index">
      <p (click)="addNestedComment(comment)" class="mb-2 " [draggable]="'false'">{{i+1}}.{{comment.comment}}     <span class="badge badge-pill badge-success">review</span></p>
  
      <ng-container *ngFor="let sub of comment.subComments; let i = index">
        <p class="text-muted card-subtitle  m-1"><span class="badge badge-pill badge-primary">sub:</span> {{sub}}</p>
      </ng-container>
    </ng-container>
  </div>
</div>
